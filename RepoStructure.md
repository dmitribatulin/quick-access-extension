# Repository Structure & Semantic Overview

This document describes every file/folder in the project, its responsibility, and the kind of data or logic it contains.

---

## Root Level Files

### `package.json`

Primary VS Code extension manifest & Node package descriptor. Declares:

- Extension metadata (name, displayName, version, publisher, engines.vscode)
- Activation events and contribution points (commands, configuration settings, menus, keybindings)
- Build scripts (TypeScript compilation, watch, packaging, lint)
- Dependencies (`uuid`) & devDependencies (`typescript`, `@types/vscode`, tooling)

Acts as the single source of truth for extension capabilities exposed to VS Code.

### `tsconfig.json`

TypeScript compiler configuration. Defines module target, output dir, strictness, and language features used to transpile `src/` into `dist/` consumed by VS Code runtime.

### `README.md`

User-facing documentation (high-level usage, setup instructions). Intended for marketplace / repository viewing.

### `CHANGELOG.md`

Versioned list of notable changes. Supports marketplace change visibility and semantic version tracking.

### `RepoStructure.md`

(Generated) Describes the codebase organization (this file).

---

## Schemas

### `schemas/tiles.schema.json`

JSON Schema defining structure for configuration array `quickAccessTiles.tileGroups`:

- `tileGroup` objects (group name + tiles)
- Individual tile properties (file/url/command, visual options like colors and icon, sizing, flags)

Used implicitly for validation / IntelliSense when editing settings.

---

## Source Code (`src/`)

All TypeScript source that compiles to `dist/`.

### `src/extension.ts`

Entry point for the extension lifecycle. Responsibilities:

- Activation handling (register commands)
- Creating / showing the Quick Access webview panel
- Instantiating and wiring `TileResolver` + `TileManager`
- Listening to configuration changes to refresh tiles
- Managing status bar / other UI triggers depending on settings (if applicable)

Core bootstrap logic.

### `src/types/index.ts`

Central type definitions:

- `TileConfig` & `TileGroupConfig`: raw config shapes from user settings
- `ResolvedTile`: enriched tile at runtime (with group + generated id)
- `ExtensionConfig`: aggregated settings (defaults + hierarchical arrays + UI options)

Provides strong typing across resolver, manager, and panel rendering.

### `src/tiles/TileResolver.ts`

Configuration resolution layer. Responsibilities:

- Reading VS Code configuration (including hierarchical merging using `configuration.inspect` for arrays such as `tileGroups`, `customCssFiles`, `customJsFiles`)
- Applying default tile style options (background, border, text colors, icon size)
- Normalizing tile entries (assign IDs, ensure group association)
- File path resolution hints (but not loading icons directly)

Produces a uniform array of `ResolvedTile` for the manager.

### `src/tiles/TileManager.ts`

In-memory tile state holder + change broadcaster.

- Stores current resolved tiles
- Exposes `refresh()` to recompute via `TileResolver`
- Emits events (`onDidChange`) consumed by the panel to re-render

Separates view logic from config processing.

### `src/panel/QuickAccessPanel.ts`

Webview panel controller. Responsibilities:

- Creating and managing a `WebviewPanel` (lifecycle, disposal, reveal)
- Feeding HTML (generated by `getWebviewContent`) into the webview
- Handling messages from the webview (tile click events)
- Executing multi-action tile logic: open file, open URL, run command (terminal vs background)
- File path resolution for tiles (workspace-relative or absolute)

Acts as presenter between tile data and webview UI.

### `src/panel/getWebviewContent.ts`

Pure HTML generator for the tiles panel. Responsibilities:

- Generates document string with CSP, linking CSS/JS resources & optional custom user files
- Layout structure: groups → tiles, empty-state message, persistent note
- Icon resolution logic (URL / absolute / workspace / extension media). If icon not found: glyph fallback (explicit text or first letter)
- Inline color/style binding using CSS variables and tile defaults
- Sanitizes which tile properties are embedded in `data-tile` (excludes raw icon markup)
- Provides HTML fallback messaging and link to open settings command

Keeps presentation separate from host logic in `QuickAccessPanel`.

---

## Media Assets (`media/`)

Static resources referenced inside the webview or command icons.

### `media/panel.css`

Primary stylesheet for webview UI. Defines:

- Layout (group wrappers, responsive flex wrapping of tiles)
- Tile dimensions (fixed 96px height, icon container sizing)
- Typography for titles/descriptions
- Hover/active border color transitions (accent color from theme)
- Badge styling for action indicators (file/url/command)
- Empty state formatting & persistent custom JS note position

Relies on VS Code theme variables.

### `media/panel.js`

Minimal client-side script injected into the webview. Responsibilities:

- Click delegation: identifies tile nodes, posts `tileClick` message to extension host
- Receives tile update messages (`updateTiles`) for dynamic refresh

### `media/custom.css`

Sample / placeholder user-injectable CSS referenced via settings (demonstrates customization pipeline).

### `media/custom.js`

Sample / placeholder user-injectable JS referenced via settings (executed after `panel.js`).

### `media/icon.svg`

Base extension icon (also reused as fallback branding). Designed to adapt color via `currentColor` when inlined.

### `media/icon-light.svg` & `media/icon-dark.svg`

Theme-specific command icons for toolbar / palette ensuring visibility across light/dark themes.

---

## Other Generated / Output

### `dist/` (build output)

Transpiled JavaScript consumed by VS Code runtime. Mirrors structure of `src/` without types. Not tracked if excluded by `.gitignore`.

---

## Configuration Data Flow Summary

1. User config (settings.json) supplies: tileGroups, defaultTileOptions, customCssFiles, customJsFiles, UI toggles.
2. `TileResolver` merges & normalizes → array of `ResolvedTile`.
3. `TileManager` stores and notifies on refresh.
4. `QuickAccessPanel` requests fresh tiles, injects HTML from `getWebviewContent`.
5. Webview (`panel.js`) sends interaction events back for execution.
6. Config changes trigger manager refresh → panel re-render.

---

## Responsibilities Matrix (Condensed)

- Manifest & Build: `package.json`, `tsconfig.json`
- Documentation: `README.md`, `CHANGELOG.md`, `RepoStructure.md`
- Schema / Validation: `schemas/tiles.schema.json`
- Types: `src/types/index.ts`
- Config Processing: `src/tiles/TileResolver.ts`
- State & Events: `src/tiles/TileManager.ts`
- Panel Controller: `src/panel/QuickAccessPanel.ts`
- HTML Rendering: `src/panel/getWebviewContent.ts`
- Webview UI Assets: `media/panel.css`, `media/panel.js`
- User Customization Samples: `media/custom.css`, `media/custom.js`
- Icons / Branding: `media/icon.svg`, `media/icon-light.svg`, `media/icon-dark.svg`

---

## Extension Interaction Lifecycle

1. Command `quickAccessTiles.openPanel` invoked.
2. Panel created (or revealed); resolver + manager supply tiles.
3. HTML rendered; CSS/JS + optional user assets loaded.
4. User clicks tile → message to extension host.
5. Host performs actions (open file / URL / run command).
6. Settings changes trigger refresh → HTML regenerated.

---

## Notes / Future Considerations

- Font Awesome support removed (simplifies configuration). Only direct paths/URLs or glyph/letter fallback for icons.
- Potential future: inline SVG sanitization if accepting raw SVG text.
- Possible optimization: lazy inject custom assets after initial paint.

---

Generated on: 2025-08-08
